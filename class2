create database Homework
use Homework
create table iam_members(db_id int primary key,name varchar(30))

create table iam_policies(db_id  int primary key,id int,name varchar(30),type varchar(30))

create table iam_policy_members(member_id int foreign key references iam_members(db_id),policy_id
int foreign key references iam_policies(db_id) primary key(member_id ,iam_members))

create table iam_roles(db_id int ,id varchar(30),name varchar(30),type varchar(30),actions varchar(30) primary key(db_id ,actions))
create table iam_statements(db_id int foreign key references  iam_policies(db_id) ,effect varchar(30),
actions varchar(30) foreign key references iam_roles(actions) ,resources varchar(30),policy_id int ,role_id int)

create table iam_projects(db_id int primary key,id  varchar(30) unique,name varchar(30),type varchar(30))

create table iam_role_projects(role_id int foreign key references iam_roles(db_id),project_id int foreign key references iam_projects(db_id))
 create table iam_statement_projects(project_id int foreign key references iam_projects(db_id),statement_id int foreign key references iam_statements(db_id))
 create table iam_policy_projects(policy_id int foreign key references iam_policies(db_id),project_id int foreign key references iam_projects(db_id))
  create table iam_staged_project_rules(db_id foreign key references iam_projects(db_id) primary key,name varchar(30),type varchar(30),deleted Nvarchar(20),project_id int )

  create table iam_project_graveyard(db_id int unique,id int unique)

  create table iam_staged_rule_conditions(db_id int foreign key references iam_staged_project_rules(db_id),rule_db_id int ,value varchar(30),attribute varchar(20),operator varchar(30))

  create table iam_projects_rules(db_id int foreign key references iam_projects(db_id) primary key,id varchar(30),name varchar(30),type varchar(30),project_id int)

  create table iam_rule_conditions(db_id int foreign key references iam_project_rules(db_id),rule_db_id int,value varchar(30),attribute varchar(30),operator varchar(30))
